---
title: 'Βάλτε (ακόμα περισσότερο) μυαλό στον ανεμιστήρα! [μέρος 2]'
date: 2013-09-21T15:10:33+00:00
url: /βάλτε-ακόμα-περισσότερο-μυαλό-στον-αν-2/
cover:
    image: περισσότερο-μυαλό-στον-αν-2.jpg
categories:
  - deltaHacker
  - Σοβαρά
tags:
  - attiny
  - avr
  - microcontroller
  - usb fan

---
Στο τεύχος 021 καταπιαστήκαμε και πάλι με τον ανεμιστήρα που είχαμε αναβαθμίσει το περασμένο καλοκαίρι. Σ&#8217; εκείνον τον ανεμιστήρα είχαμε προσθέσει μια μικρή δόση ευφυΐας, ώστε να δέχεται δύο απλές εντολές (on, off) από τον υπολογιστή κι όχι μόνο ρεύμα. Αυτή τη φορά αποφασίσαμε να τον κάνουμε ακόμα πιο έξυπνο! Στη νέα του έκδοση θα μπορούμε να ρυθμίζουμε τις στροφές του από τον υπολογιστή, ενώ θα μπορούμε να λαμβάνουμε και μερικές μετρήσεις από το περιβάλλον&#8230;

Μέχρι στιγμής έχουμε εξετάσει το hardware για την ανανεωμένη εκδοχή του ανεμιστήρα. Αναφερθήκαμε στο ζήτημα των εύκολων αναβαθμίσεων/δοκιμών του firmware και γι&#8217; αυτό το σκοπό στραφήκαμε στον bootloader ονόματι micronucleus. Με τη βοήθειά του μπορούμε να αναβαθμίζουμε το firmware του ανεμιστήρα χωρίς κάποιο βοηθητικό hardware, χωρίς να τον &#8220;ξεκοιλιάζουμε&#8221; και με την άνεση που προσφέρει η σύνδεση USB! Φυσικά η κουβέντα δεν έμεινε στο θεωρητικό και φροντίσαμε να εγκαταστήσουμε τον bootloader στο μικροελεγκτή. Για το σκοπό αυτό μετατρέψαμε ένα Arduino σε AVR programmer και στη συνέχεια μεταφέραμε τον κώδικα του bootloader στον μικροελεγκτή. Παρεμπιπτόντως, να θυμίσουμε ότι αντικαταστήσαμε τον παλιό μικροελεγκτή (ATtiny45) με έναν ελαφρώς μεγαλύτερο (ATtiny85). Πέρα από όλα αυτά, εξετάσαμε και το ανανεωμένο κύκλωμα για τον ανεμιστήρα, στο οποίο συνδέσαμε πλέον και τον αισθητήρα DHT11.

Σε αυτό το άρθρο θα ασχοληθούμε με το software. Για αρχή θα αναβαθμίσουμε τη βιβλιοθήκη V-USB και θα διορθώσουμε ένα πρόβλημα που είχαμε εντοπίσει στο παλιό πρόγραμμα του μικροελεγκτή. Στη συνέχεια θα προσθέσουμε τις νέες λειτουργίες στο firmware του ανεμιστήρα, ενώ θα αναβαθμίσουμε αντίστοιχα και το πρόγραμμα για τον υπολογιστή!

> Διαβάστε ολόκληρο το άρθρο στο <a href="http://deltahacker.gr/2013/07/29/deltahacker022/" title="deltaHacker 022 - Oh-Bee-Ess-Dee Edition" target="_blank" rel="noopener noreferrer nofollow" class="broken_link">deltaHacker 022 (τεύχος Ιουλίου 2013)</a>.
